<div class="data-container p-t-0">

  <div class="row">
    <div class="col-xs-12">
      <h3>Expences Summary</h3>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>
                Name
            </th>
            <th>
                Expences
            </th>
            <th>
                Total Spent
            </th>
            <th>
                Owes (Had To Pay)
            </th>
            <th>
                Is Owned (paid for himself)
            </th>
            <th>
                Balance
            </th>
          </tr>
        </thead>
        <tbody>

      {{#each person as |person|}}
        <tr>
          <td>{{person.display_name}}</td>

          <td>{{summary.expence-count person controller.expence}}</td>

          <td>{{summary.total-spent person controller.expence}}</td>

          <td>{{summary.total-owes person controller.expence}}</td>

          <td>{{summary.total-owned person controller.expence}}</td>

          <td>{{summary.total-balance person controller.expence}}</td>
        </tr>
      {{/each}}

      </tbody>
      </table>
    </div>
    <div class="col-xs-12">
      <h3>Payments</h3>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>
                From
            </th>
            <th>
                To
            </th>
            <th>
                Amount
            </th>
          </tr>
        </thead>
        <tbody>

      {{#each from_id in (get-keys expenceMap) }}
        {{#each to_id in (get-keys expenceMap from_id) }}
        <tr>
          <td>{{summary.from-payment from_id to_id controller.person expenceMap}}</td>

          <td>{{summary.to-payment from_id to_id person expenceMap}}</td>

          <td>{{summary.absolute-amount from_id to_id expenceMap}}</td>

          <td>
            <button type="button" name="button" class="btn btn-success" {{action 'pay' person[from_id] to_id expenceMap}}>Pay</button>
          </td>
        </tr>
        {{/each}}
      {{/each}}

      </tbody>
      </table>
    </div>
  </div>

  {{outlet}}
</div>
